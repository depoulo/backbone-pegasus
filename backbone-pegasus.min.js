/* 0.1.1 */
function pegasus(a,b){return b=new XMLHttpRequest,b.open("GET",a),a=[],b.onreadystatechange=b.then=function(c,d,e){c.call&&(a=[,c,d]),4==b.readyState&&(e=a[0|b.status/200],e&&e(JSON.parse(b.responseText,b)))},b.send(),b}!function(){function a(a,d,e){var f;if(d.url&&(f="string"==typeof d.url?d.url:d.url()),"read"===a&&f){var g=c[f];g?g.then(function(a){delete c[f];var b=e.reset?"reset":"set";d[b](a),d.trigger("sync",d,a,e)},function(a){d.trigger("error",d,a,e)}):b(a,d,e)}else b(a,d,e)}var b,c={};window.BackbonePegasus={get:function(a){c[a]=pegasus(a)},setup:function(){b=Backbone.sync,Backbone.sync=a}}}();